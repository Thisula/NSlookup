name: Check DNS Records
  hosts: all
  gather_facts: false
  tasks:
    - name: Retrieve DNS records for websites
      command: "nslookup {{ item }}"
      with_items:
        - google.com
        - facebook.com
        - youtube.com
      register: dns_results

    - name: Store DNS records in a GitHub repository
      github_repository:
        repo: "Thisula/NSlookup.git"
        token: "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"
        path: "dns_records.txt"
        content: "{{ item.stdout_lines | join('\n') }}"
      with_items: "{{ dns_results.results }}"
